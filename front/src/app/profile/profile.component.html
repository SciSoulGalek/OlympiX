<!-- profile.component.html -->
<div class="profile-container">
  <h2>Your Profile</h2>
  
  <div *ngIf="isLoading" class="loading">
    <p>Loading profile...</p>
  </div>
  
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>
  
  <form *ngIf="!isLoading" [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <!-- Username -->
    <div class="form-group">
      <label>Username</label>
      <input type="text" class="form-control" formControlName="username" readonly>
    </div>
    
    <!-- Email -->
    <div class="form-group">
      <label>Email</label>
      <input type="email" class="form-control" formControlName="email">
      <div *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" class="text-danger">
        Please enter a valid email
      </div>
    </div>
    
    <!-- Name Fields -->
    <div class="row">
      <div class="col-md-6 form-group">
        <label>First Name</label>
        <input type="text" class="form-control" formControlName="first_name">
      </div>
      <div class="col-md-6 form-group">
        <label>Last Name</label>
        <input type="text" class="form-control" formControlName="last_name">
      </div>
    </div>
    
    <!-- Profile Fields -->
    <div class="form-group">
      <label>Phone Number</label>
      <input type="tel" class="form-control" formControlName="phone_number">
    </div>
    
    <div class="form-group">
      <label>School</label>
      <input type="text" class="form-control" formControlName="school">
    </div>
    
    <div class="form-group">
      <label>Grade</label>
      <input type="number" class="form-control" formControlName="grade">
    </div>
    
    <!-- Action Buttons -->
    <div class="form-group button-group">
      <button *ngIf="!isEditing" type="button" class="btn btn-primary" (click)="toggleEdit()">
        Edit Profile
      </button>
      
      <div *ngIf="isEditing" class="edit-actions">
        <button type="submit" class="btn btn-success" [disabled]="profileForm.invalid || isLoading">
          <span *ngIf="isLoading" class="spinner-border spinner-border-sm"></span>
          Save Changes
        </button>
        <button type="button" class="btn btn-secondary" (click)="toggleEdit()" [disabled]="isLoading">
          Cancel
        </button>
      </div>
    </div>
  </form>
</div>